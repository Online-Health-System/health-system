<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Doctor Profile</title>
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="icon" type="image/png" href="../assets/images/logo.png" />
  </head>
  <body>
    <div class="layout">
      <!-- ===== Sidebar ===== -->
      <aside class="sidebar">
        <h2>
          <img src="../assets/images/logo.png" width="50" height="50" />
          Health Care
        </h2>

        <a href="doctor.html">Dashboard</a>
        <a href="" class="active">Profile</a>
        <a href="appointments.html">Appointments</a>
        <a href="reports.html">Reports</a>
        <a id="logoutBtn">Logout</a>
      </aside>

      <!-- ===== Main ===== -->
      <main class="main">
        <!-- ===== Header ===== -->
        <header class="header">
          <h1>Doctor Profile</h1>
          <p>Personal & Professional Information</p>
        </header>

        <!-- ===== Profile Card ===== -->
        <section class="card" id="doctorProfile">
          <h2 id="docName"></h2>
          <p id="docSpecialty"></p>

          <hr />

          <div class="cards">
            <div class="card">
              <h3>Status</h3>
              <span class="badge badge-success" id="docStatus"></span>
            </div>

            <div class="card">
              <h3>Experience</h3>
              <p><span id="docExperience"></span></p>
            </div>

            <div class="card">
              <h3>Appointments Today</h3>
              <p id="docAppointments"></p>
            </div>
          </div>

          <hr />

          <!-- ===== Info Table ===== -->
          <div class="glass-table" id="docInfo">
            <table>
              <tr>
                <th style="width: 20%">Email</th>
                <td id="docEmail"></td>
              </tr>
              <tr>
                <th>Phone</th>
                <td id="docPhone"></td>
              </tr>
              <tr>
                <th>Gender</th>
                <td id="docGender"></td>
              </tr>
              <tr>
                <th>Qualification</th>
                <td id="docQualification"></td>
              </tr>
              <tr>
                <th>Clinic Room</th>
                <td id="docRoom"></td>
              </tr>
              <tr>
                <th>Working Hours</th>
                <td id="docHours"></td>
              </tr>
              <tr>
                <th>Patients Today</th>
                <td id="docPatients"></td>
              </tr>
              <tr>
                <th>Bio</th>
                <td id="docBio"></td>
              </tr>
            </table>
          </div>
        </section>
      </main>
    </div>
    <script src="../../modules/doctor.js" type="module"></script>
    <script src="../../modules/profileDoc.js" type="module"></script>
    <script type="module">
      import { fetchDoctorData } from "../../modules/profileDoc.js";
      import { checkAccess } from "../../modules/auth/auth.js";
      import { getCurrentUser } from "../../modules/auth/auth.js";
      checkAccess(["doctor"]);
      let currentUser = getCurrentUser();
      currentUser = currentUser
        ? currentUser
        : { id: "DOC-101", name: "Dr. Ahmed Hassan", role: "doctor" };
      fetchDoctorData(currentUser.id);
    </script>
  </body>
</html>
